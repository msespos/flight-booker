<%= form_with url: '/flights', method: :get, local: true do |f| %>
  Departing from:
  <%= select :flight, :departure_airport_id, @airport_options,
             selected: params.dig(:flight, :departure_airport_id) %>
  Arriving at:
  <%= select :flight, :arrival_airport_id, @airport_options,
             selected: params.dig(:flight, :arrival_airport_id) %>
  Number of Passengers:
  <%= select_tag :number_of_passengers,
                 options_for_select(@passenger_options,
                                    params[:number_of_passengers]) %>
  Departure Date:
  <%= select :flight, :departure_date, Flight.all
             .collect { |f| format_date(f[:departure_date]) }.uniq,
             selected: params.dig(:flight, :departure_date) %>
  <%= f.submit "Go!" %>
<% end %>
<% unless @found_flights.nil? %>
  <% if @found_flights[0].nil? %>
    No flights found
  <% else %>
    <%= form_with url: '/bookings/new', method: :get, local: true do |form| %>
      <%= hidden_field :flight, :number_of_passengers,
                       value: params[:number_of_passengers] %>
      <% @found_flights.each do |f| %>
        <%= radio_button :flight, :id, f[:id] %>
        <%= airport_code(f[:departure_airport_id]) %>
        <%= airport_code(f[:arrival_airport_id]) %>
        <%= format_date(f[:departure_date]) %>
        <%= format_time(f[:departure_time]) %><br>
      <% end %>
      <%= form.submit "Select flight" %>
    <% end %>
  <% end %>
<% end %>
